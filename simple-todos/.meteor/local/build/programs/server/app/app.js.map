{"version":3,"sources":["meteor://ðŸ’»app/imports/api/tasks.js","meteor://ðŸ’»app/server/main.js"],"names":[],"mappings":";;;;;;;;;;;AAAA;;AACA;;AACA;;AAEO,IAAM,wBAAQ,IAAI,aAAM,UAAN,CAAiB,OAArB,CAAR;;AAEb,IAAI,eAAO,QAAP,EAAiB;;;AAGnB,iBAAO,OAAP,CAAe,OAAf;AAAwB,aAAS,gBAAT,GAA4B;AAClD,aAAO,MAAM,IAAN,CAAW,EAAE,OAAO,KAAK,MAAL,EAApB,CAAP,CADkD;KAA5B;;WAAS;KAAjC,EAHmB;CAArB;;AAQA,eAAO,OAAP,CAAe;AACb;yBAAe,MAAM;AACnB,wBAAM,IAAN,EAAY,MAAZ;;;AADmB,UAIf,CAAE,KAAK,MAAL,EAAa;AACjB,cAAM,IAAI,eAAO,KAAP,CAAa,gBAAjB,CAAN,CADiB;OAAnB;;AAIA,YAAM,MAAN,CAAa;AACX,kBADW;AAEX,mBAAW,IAAI,IAAJ,EAAX;AACA,eAAO,KAAK,MAAL;AACP,kBAAU,eAAO,KAAP,CAAa,OAAb,CAAqB,KAAK,MAAL,CAArB,CAAkC,QAAlC;OAJZ,EARmB;;;;KADR;AAgBb;yBAAe,QAAQ;AACrB,wBAAM,MAAN,EAAc,MAAd,EADqB;;AAGrB,UAAM,OAAO,MAAM,OAAN,CAAc,MAAd,CAAP,CAHe;AAIrB,UAAI,mBAAgB,KAAK,KAAL,KAAe,KAAK,MAAL,EAAa;;AAE9C,cAAM,IAAI,eAAO,KAAP,CAAa,gBAAjB,CAAN,CAF8C;OAAhD;;AAKA,YAAM,MAAN,CAAa,MAAb,EATqB;;;;KAhBV;AA2Bb;6BAAmB,QAAQ,YAAY;AACrC,wBAAM,MAAN,EAAc,MAAd,EADqC;AAErC,wBAAM,UAAN,EAAkB,OAAlB,EAFqC;;AAIrC,UAAM,OAAO,MAAM,OAAN,CAAc,MAAd,CAAP,CAJ+B;AAKrC,UAAI,KAAK,KAAL,KAAe,KAAK,MAAL,EAAa;;AAE9B,cAAM,IAAI,eAAO,KAAP,CAAa,gBAAjB,CAAN,CAF8B;OAAhC;;AAKA,YAAM,MAAN,CAAa,MAAb,EAAqB,EAAE,MAAM,EAAE,SAAS,UAAT,EAAR,EAAvB,EAVqC;;;;KA3B1B;AAuCb;uBAAa,QAAQ,MAAM;AACzB,wBAAM,MAAN,EAAc,MAAd,EADyB;AAEzB,wBAAM,IAAN,EAAY,MAAZ,EAFyB;;AAIzB,UAAM,OAAO,MAAM,OAAN,CAAc,MAAd,CAAP,CAJmB;AAKzB,UAAI,KAAK,KAAL,KAAe,KAAK,MAAL,EAAa;AAC9B,cAAM,IAAI,eAAO,KAAP,CAAa,gBAAjB,CAAN,CAD8B;OAAhC;;AAIA,YAAM,MAAN,CAAa,MAAb,EAAqB,EAAE,MAAM,EAAE,MAAM,IAAN,EAAR,EAAvB,EATyB;;;;KAvCd;CAAf,8E;;;;;;;;;;;ACdA,iF","file":"/app.js","sourcesContent":["import { Meteor } from 'meteor/meteor';\r\nimport { Mongo } from 'meteor/mongo';\r\nimport { check } from 'meteor/check';\r\n\r\nexport const Tasks = new Mongo.Collection('tasks');\r\n\r\nif (Meteor.isServer) {\r\n  // This code only runs on the server\r\n  // Only publish tasks that are public or belong to the current user\r\n  Meteor.publish('tasks', function tasksPublication() {\r\n    return Tasks.find({ owner: this.userId });\r\n  });\r\n}\r\n\r\nMeteor.methods({\r\n  'tasks.insert'(text) {\r\n    check(text, String);\r\n\r\n    // Make sure the user is logged in before inserting a task\r\n    if (! this.userId) {\r\n      throw new Meteor.Error('not-authorized');\r\n    }\r\n\r\n    Tasks.insert({\r\n      text,\r\n      createdAt: new Date(),\r\n      owner: this.userId,\r\n      username: Meteor.users.findOne(this.userId).username,\r\n    });\r\n  },\r\n  'tasks.remove'(taskId) {\r\n    check(taskId, String);\r\n\r\n    const task = Tasks.findOne(taskId);\r\n    if (task.private && task.owner !== this.userId) {\r\n      // If the task is private, make sure only the owner can delete it\r\n      throw new Meteor.Error('not-authorized');\r\n    }\r\n\r\n    Tasks.remove(taskId);\r\n  },\r\n  'tasks.setChecked'(taskId, setChecked) {\r\n    check(taskId, String);\r\n    check(setChecked, Boolean);\r\n\r\n    const task = Tasks.findOne(taskId);\r\n    if (task.owner !== this.userId) {\r\n      // If the task is private, make sure only the owner can check it off\r\n      throw new Meteor.Error('not-authorized');\r\n    }\r\n\r\n    Tasks.update(taskId, { $set: { checked: setChecked } });\r\n  },\r\n  'tasks.edit'(taskId, text) {\r\n    check(taskId, String);\r\n    check(text, String);\r\n\r\n    const task = Tasks.findOne(taskId);\r\n    if (task.owner !== this.userId) {\r\n      throw new Meteor.Error('not-authorized');\r\n    }\r\n\r\n    Tasks.update(taskId, { $set: { text: text } });\r\n  },\r\n  /*\r\n  'tasks.setPrivate'(taskId, setToPrivate) {\r\n    check(taskId, String);\r\n    check(setToPrivate, Boolean);\r\n\r\n    const task = Tasks.findOne(taskId);\r\n\r\n    // Make sure only the task owner can make a task private\r\n    if (task.owner !== this.userId) {\r\n      throw new Meteor.Error('not-authorized');\r\n    }\r\n\r\n    Tasks.update(taskId, { $set: { private: setToPrivate } });\r\n  },\r\n  */\r\n});","import '../imports/api/tasks.js';"]}